<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Ranking App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ¬ Movie Ranking App</h1>
            <p>Rank your favorite movies using binary comparisons</p>
        </header>

        <!-- Configuration Section -->
        <section id="config-section" class="section">
            <h2>Setup</h2>
            <div class="config-form">
                <div class="form-group">
                    <label for="api-url">API URL:</label>
                    <input type="text" id="api-url" value="https://movie-ranking-api-ea3e.onrender.com" placeholder="https://your-api-url.com">
                </div>
                <div class="form-group">
                    <label for="load-type">Load By:</label>
                    <select id="load-type">
                        <option value="category">Category (Recommended)</option>
                        <option value="year">Year</option>
                    </select>
                </div>
                <div class="form-group" id="category-group">
                    <label for="movie-category">Category:</label>
                    <select id="movie-category">
                        <option value="">Loading categories...</option>
                    </select>
                </div>
                <div class="form-group hidden" id="year-group">
                    <label for="movie-year">Year:</label>
                    <input type="number" id="movie-year" value="2024" min="1900" max="2030">
                </div>
                <div class="form-group">
                    <label for="max-movies">Max Movies:</label>
                    <input type="number" id="max-movies" value="100" min="1" max="200">
                </div>
                <button id="create-session-btn" class="btn btn-primary">Create Session & Load Movies</button>
                
                <div class="divider">OR</div>
                
                <div class="form-group">
                    <label for="letterboxd-url">Import Letterboxd List (URL):</label>
                    <input type="text" id="letterboxd-url" placeholder="https://boxd.it/..." style="margin-bottom: 10px; width: 100%; padding: 8px;">
                    <button id="import-letterboxd-btn" class="btn btn-secondary">Import & Load Letterboxd List</button>
                    <small style="display: block; margin-top: 5px; color: #666;">
                        Paste a Letterboxd list URL (e.g., https://boxd.it/...) to import and rank those movies
                    </small>
                </div>
            </div>
            <div id="session-info" class="session-info hidden">
                <p><strong>Session ID:</strong> <span id="session-id"></span></p>
                <p><strong>Status:</strong> <span id="session-status">Loading...</span></p>
            </div>
        </section>

        <!-- Selection Section -->
        <section id="selection-section" class="section hidden">
            <h2>Select Movies You've Seen</h2>
            <p class="selection-info">Click on the movies you've watched. Selected movies will be highlighted.</p>
            <div id="selection-controls" class="controls">
                <button id="select-all-btn" class="btn btn-info">Select All</button>
                <button id="deselect-all-btn" class="btn btn-secondary">Deselect All</button>
                <button id="confirm-selection-btn" class="btn btn-success">Start Ranking with Selected (<span id="selected-count">0</span>)</button>
            </div>
            <div id="movies-selection-grid" class="movies-grid"></div>
        </section>

        <!-- Ranking Section -->
        <section id="ranking-section" class="section hidden">
            <h2>Ranking</h2>
            <div id="ranking-controls" class="controls">
                <button id="start-ranking-btn" class="btn btn-success">Start Ranking</button>
                <button id="get-status-btn" class="btn btn-info">Check Status</button>
                <button id="get-results-btn" class="btn btn-warning">View Results</button>
                <button id="reset-btn" class="btn btn-secondary">Reset</button>
            </div>

            <!-- Current Comparison -->
            <div id="comparison-container" class="comparison-container hidden">
                <div class="comparison-header">
                    <h3>Which movie do you prefer?</h3>
                    <p id="comparison-progress"></p>
                </div>
                <div class="movies-comparison">
                    <div class="movie-card" id="left-movie">
                        <div class="movie-poster">
                            <img id="left-poster" src="" alt="Movie poster">
                        </div>
                        <div class="movie-info">
                            <h4 id="left-title"></h4>
                            <p id="left-year"></p>
                            <p id="left-rating"></p>
                            <p class="movie-overview" id="left-overview"></p>
                        </div>
                        <button class="btn btn-choice" data-choice="left">Choose This ðŸŽ¬</button>
                    </div>

                    <div class="vs-divider">
                        <span>VS</span>
                    </div>

                    <div class="movie-card" id="right-movie">
                        <div class="movie-poster">
                            <img id="right-poster" src="" alt="Movie poster">
                        </div>
                        <div class="movie-info">
                            <h4 id="right-title"></h4>
                            <p id="right-year"></p>
                            <p id="right-rating"></p>
                            <p class="movie-overview" id="right-overview"></p>
                        </div>
                        <button class="btn btn-choice" data-choice="right">Choose This ðŸŽ¬</button>
                    </div>
                </div>
                <div class="skip-container">
                    <button class="btn btn-skip" data-choice="skip">Skip (Haven't seen both)</button>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loading" class="loading hidden">
                <div class="spinner"></div>
                <p>Loading...</p>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results-section" class="section hidden">
            <h2>Final Ranking Results</h2>
            <div id="results-container"></div>
        </section>

        <!-- Status Messages -->
        <div id="messages"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>

